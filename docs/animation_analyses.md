# Background
As explained in the [machine learning section](https://github.com/devonorourke/mysosoup/blob/master/docs/diversity_workflow.md#machine-learning) of the `diversity_workflow.md` document, the [machine_learn_analyses.R](https://github.com/devonorourke/mysosoup/blob/master/scripts/r_scripts/machine_learn_analyses.R) script was used to generate a series of data summaries that highlighted the features (ASVs) that were most important to the model accuracy of the Random Forest classifier. We generated a series of static slopeplots to illustrate changes in arthropod detections and abundances per Site (Figures [S5](https://github.com/devonorourke/mysosoup/blob/master/figures/slopeplot_occur_rfydat_byMonth.png)-[S6](https://github.com/devonorourke/mysosoup/blob/master/figures/slopeplot_abund_rfydat_byMonth.png)) and Site + Month ([Figure 5](https://github.com/devonorourke/mysosoup/blob/master/figures/slopeplot_allDat_bySiteMonth.png)), however these visualizations make it challenging to appreciate the magnitude of turnover among sequence variants in each Month. Likewise, it's not as clear to resolve which ASVs are changing in similar patterns or offer distinct trends between Sites. Thus, we were motivated to create a few animations that make it easier to observe these trends.

# Animations
The ASVs highlighted in the first plot represent data filtered to select the most abundant ASVs among selected arthropod Orders. This is distinct from how points were selected in the slopeplot figures because those highlighted ASVs that were most significant to the Random Forest classifier model accuracy. There are some overlaps in data selection, but there can be instances in which an ASV is generally similar in abundance and/or occurrence across all Sites and Months - this would not be useful in the supervised learning model and would not have been selected as an important ASV in the plot; however, something that has consistently high abundances/occurrence would be highlighted in this plot.

The following animation depicts in the fraction of samples per Month an ASV is detected (x axis) and fraction of sequences per Month an ASV contains (y axis) for individual ASVs (points), colored by arthropod Order:

![perSiteMonth_ASVchanges_MLonly](https://github.com/devonorourke/mysosoup/blob/master/figures/gifs/sitemonth_ASVs.gif)

Because many of the same ASVs were shared across sites, and because our subsequent statistical analyses revealed that the greatest proportion of variation in our linear model of Site + Month main effects was attributed to Month, we grouped the data across both sites to investigate the collective (regional) changes of bat diets. We wanted to compare how the machine learning predictions mirrored the highly abundant/occurrent predictions of the previous plot, we generated the same type of visualization depicting detections (x axis) and abundances (y axis). Note the difference in axes scales here are absolute values, not percentages of detections/read abundances. However, this plot is colored to distinguish those points that were selected as important to the supervised learning classifier (solid colors) relative to those that were not (points with just a colored outline).

![perMonth_ASVchanges_allDat](https://github.com/devonorourke/mysosoup/blob/master/figures/gifs/alldat_selectOrders_onepane.gif)

Interestingly, the majority of the most dynamic points are Dipteran. However, we also see that a few of the points not highlighted by the supervised learning classifier are also highly abundant or frequently detected (or both) - these are almost all Dipterans (the one exception is the other blue dot, a variant of the ASV-1 _Eustala_ genus). This same dataset is much easier to see if we subset by the arthropod Orders that are most frequently detected in our dataset. Thus the following figure is taking the previous plot and depicting the per-Order changes rather than overlaying them all at once:

![perMonth_ASVchanges_perOrder](https://github.com/devonorourke/mysosoup/blob/master/figures/gifs/alldat_selectOrders_byOrder.gif)

A few insights from this figure:
1. The Dipteran Order has the most ASVs identified as important by the Random Forest classifier, and that's likely because these points are shifting substantially across Months with respect to abudance and detection.
2. Nevertheless, other Orders indeed have dramatic shifts, though the overall numbers of these important ASVs are fewer per Order compared to Dipterans. It's also clear that the abundances or detections of these other Orders is relatively less than the Dipteran ASVs. Our previous work with mock communities suggest that the primers we're using are not biased towards Dipterans and amplify these Orders presented here (and others) equally well in vitro, thus these differences in abundance of sequences may be more due to biomass than molecular biases.
3. To keep the scale consistent among Orders, `ASV1-Eustala` is actually **off the page** for the June month. It's not missing - it's retained more than 40,000 reads for June! It's clear that the abundance of this one taxa of spider is requently consumed by bats throughout the seasons we've sampled.   

To get a clearer perspective on the dynamics of Dipteran turnover, we generated the same plot as above but focused only on the Dipteran species:
![perMonth_ASVchanges_DipteranOnly](https://github.com/devonorourke/mysosoup/blob/master/figures/gifs/dipteran_only.gif)
